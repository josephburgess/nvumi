*nvumi*:  Natural language calculations in Neovim
===============================================

nvumi integrates the [numi-cli](https://github.com/nikolaeu/numi) natural language
calculator with [snacks.nvim](https://github.com/folke/snacks.nvim). It provides a
scratch buffer where you can type natural language expressions and see the evaluated
results either inline or on a new line.

USAGE
-----

    `:Nvumi

    This command opens a scratch buffer where you can enter your
    calculations. In the scratch buffer:

      - Expressions are automatically evaluated as you type.
      - Press `<CR>` (Enter) in normal mode to re-evaluate/refresh all non-empty lines.
      - Press `<R>` in normal mode to reset the buffer (clear all content).
      - Press `<leader>y` in normal mode to yank the evaluation of the current line.
      - Press `<leader>Y` in normal mode to yank all evaluations.


VARIABLE ASSIGNMENT
-------------------

nvumi now supports assigning evaluated expressions to variables. This lets you reuse previously computed values in your calculations.

- To assign a variable, write a line in the form:

      variable_name = expression

  For example, typing:

      x = 2+2

  will evaluate `2+2` and store the result in `x`.

- To use the stored value, simply reference the variable in another expression:

      x * 3

  nvumi will substitute `x` with its stored result before evaluation.

- All variables are maintained for the current scratch session and are cleared when you use the `<reset>` command.


CONFIGURATION
-------------

nvumi currently supports the following configuration options:

    `virtual_text = "inline" | "newline"`  -- Where to display the results.
    `prefix = " ðŸš€ "` -- Choose the prefix shown before the virtual text
    `date_format = "iso"` -- Choose the date format, other options: "uk", "us", "long"`

Keybinds:

    `keys.run`   -- Runs the calculations. Default: `<CR>`
    `keys.reset` -- Resets (clears) the buffer. Default: `R`
    `keys.yank`  -- Yanks the evaluation of the line under the cursor. Default: `<leader>y`
    `keys.yank_all`  -- Yanks all evaluations. Default: `<leader>Y`

This is set during the plugin setup. For example, using Lazy.nvim:

>lua
  {
    "josephburgess/nvumi",
    dependencies = { "folke/snacks.nvim" },
      opts = {
	virtual_text = "inline", -- or "newline"
	prefix = " ðŸš€ ", -- prefix shown before the output
	date_format = "iso", -- or: "uk", "us", "long"
	keys = {
	  run = "<CR>", -- run all calculations
	  reset = "R", -- reset buffer
	  yank = "<leader>y", -- yank output of current line
	  yank_all = "<leader>Y", -- yank all outputs
	}
      }
  }
<

REQUIREMENTS
------------

- **numi-cli:** A natural language calculator.
  Install via: >bash
      curl -sSL https://s.numi.app/cli | sh
<
  or with Homebrew: >bash
      brew install nikolaeu/numi/numi-cli
<

- **snacks.nvim:** Used to create the scratch buffer.

EXAMPLES
--------

Type natural language expressions such as:

    20 inches in cm
    50 times 2
    25 GBP to EUR
    today + 8 weeks

See the numi-cli documentation for more about the expressions which are possible to evaluate.

vim:tw=78:ts=8:noet:ft=help:norl:
